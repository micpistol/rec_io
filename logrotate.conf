# Trading System Log Rotation Configuration
# This file should be copied to /etc/logrotate.d/trading-system on DigitalOcean deployment

# Main application logs
logs/main_app.out.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload main_app > /dev/null 2>&1 || true
    endscript
}

logs/main_app.err.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload main_app > /dev/null 2>&1 || true
    endscript
}

# Trade management logs
logs/trade_manager.out.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload trade_manager > /dev/null 2>&1 || true
    endscript
}

logs/trade_manager.err.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload trade_manager > /dev/null 2>&1 || true
    endscript
}

# Trade execution logs
logs/trade_executor.out.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload trade_executor > /dev/null 2>&1 || true
    endscript
}

logs/trade_executor.err.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload trade_executor > /dev/null 2>&1 || true
    endscript
}



# Active trade supervisor logs
logs/active_trade_supervisor.out.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload active_trade_supervisor > /dev/null 2>&1 || true
    endscript
}

logs/active_trade_supervisor.err.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload active_trade_supervisor > /dev/null 2>&1 || true
    endscript
}

# Auto entry supervisor logs
logs/auto_entry_supervisor.out.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload auto_entry_supervisor > /dev/null 2>&1 || true
    endscript
}

logs/auto_entry_supervisor.err.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload auto_entry_supervisor > /dev/null 2>&1 || true
    endscript
}

# BTC price watchdog logs
logs/btc_price_watchdog.out.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload btc_price_watchdog > /dev/null 2>&1 || true
    endscript
}

logs/btc_price_watchdog.err.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload btc_price_watchdog > /dev/null 2>&1 || true
    endscript
}

# Database poller logs
logs/db_poller.out.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload db_poller > /dev/null 2>&1 || true
    endscript
}

logs/db_poller.err.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload db_poller > /dev/null 2>&1 || true
    endscript
}

# Kalshi account sync logs
logs/kalshi_account_sync.out.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload kalshi_account_sync > /dev/null 2>&1 || true
    endscript
}

logs/kalshi_account_sync.err.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload kalshi_account_sync > /dev/null 2>&1 || true
    endscript
}

# Kalshi API watchdog logs
logs/kalshi_api_watchdog.out.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload kalshi_api_watchdog > /dev/null 2>&1 || true
    endscript
}

logs/kalshi_api_watchdog.err.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload kalshi_api_watchdog > /dev/null 2>&1 || true
    endscript
}

# Unified production coordinator logs
logs/unified_production_coordinator.out.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload unified_production_coordinator > /dev/null 2>&1 || true
    endscript
}

logs/unified_production_coordinator.err.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload unified_production_coordinator > /dev/null 2>&1 || true
    endscript
}

# Cascading failure detector logs
logs/cascading_failure_detector.out.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload cascading_failure_detector > /dev/null 2>&1 || true
    endscript
}

logs/cascading_failure_detector.err.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        supervisorctl -c backend/supervisord.conf reload cascading_failure_detector > /dev/null 2>&1 || true
    endscript
}

# Supervisor log
logs/supervisord.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
} 